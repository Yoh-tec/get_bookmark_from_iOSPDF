PDF Bookmark Extractor プロジェクト - 技術仕様書
==================================================

【プロジェクト概要】
macOSのプレビュー.appで追加されたブックマーク情報をPDFファイルから抽出するツール
- シェルスクリプト版: コマンドライン用
- Webアプリケーション版: ブラウザ用

【使用言語・ライブラリ・バージョン】

■ シェルスクリプト版 (extract_bookmarks.sh)
----------------------------------------
言語: Bash (シェルスクリプト)
目的: PDFファイルからブックマーク情報を抽出するコア機能

使用コマンド・ツール:
- qpdf: PDFファイルの解析・変換ツール
  バージョン: 最新版 (Homebrew経由でインストール)
  目的: PDFの内部構造をJSON形式で出力し、メタデータオブジェクトを特定

- jq: JSONデータ処理ツール
  バージョン: 最新版 (Homebrew経由でインストール)
  目的: qpdfのJSON出力からメタデータオブジェクトを抽出

- python3: Python実行環境
  バージョン: Python 3.11 (Anaconda環境)
  目的: zlib解凍とXML解析
  使用モジュール:
    * zlib: 圧縮データの解凍
    * re: 正規表現によるページ番号抽出
    * xml.etree.ElementTree: XML解析 (未使用、正規表現で代替)

- その他のシェルコマンド:
  * mktemp: 一時ファイル作成
  * sed: テキスト置換
  * tr: 文字変換
  * sort: ソート
  * wc: 文字数・行数カウント
  * tail: ファイル末尾取得

■ Webアプリケーション版 (Flask)
-----------------------------
言語: Python 3.11
目的: ブラウザベースのユーザーインターフェース提供

使用ライブラリ:
- Flask: Webフレームワーク
  バージョン: 3.1.1
  目的: HTTPサーバー、ルーティング、テンプレートエンジン

- Werkzeug: WSGIユーティリティライブラリ
  バージョン: 3.1.3
  目的: ファイルアップロード処理、セキュリティ機能

- subprocess: Python標準ライブラリ
  目的: シェルスクリプトの実行

- os: Python標準ライブラリ
  目的: ファイルシステム操作、環境変数管理

- uuid: Python標準ライブラリ
  目的: ユニークなファイル名生成

- tempfile: Python標準ライブラリ
  目的: 一時ファイル管理 (インポート済み、未使用)

- shutil: Python標準ライブラリ
  目的: ファイル操作 (インポート済み、未使用)

■ フロントエンド技術
------------------
言語: HTML5, CSS3, JavaScript (ES6+)
目的: ユーザーインターフェースとインタラクション

使用技術:
- HTML5: マークアップ言語
  目的: ページ構造、フォーム、ファイルアップロード

- CSS3: スタイルシート
  目的: レスポンシブデザイン、アニメーション、モダンUI
  特徴:
    * Flexboxレイアウト
    * CSS Grid
    * グラデーション背景
    * ホバーエフェクト
    * キーフレームアニメーション

- JavaScript (ES6+): クライアントサイドスクリプト
  目的: ファイルアップロード、ドラッグ&ドロップ、AJAX通信
  機能:
    * File API
    * Drag & Drop API
    * Fetch API
    * DOM操作

■ 開発環境・ツール
----------------
- OS: macOS 23.1.0 (Darwin)
- シェル: zsh (/bin/zsh)
- パッケージマネージャー: Homebrew
- Python環境: Anaconda (base環境)
- エディタ: Cursor (AI支援コーディングエディタ)

■ ファイル構成
-------------
プロジェクトルート (/Users/yoh/Downloads/)
├── extract_bookmarks.sh          # シェルスクリプト版
├── app.py                        # Flaskメインアプリケーション
├── requirements.txt              # Python依存関係
├── templates/
│   └── index.html               # HTMLテンプレート
├── static/
│   └── style.css                # CSSスタイル
├── uploads/                     # アップロードファイル保存先
├── README.md                    # シェルスクリプト版説明書
├── web_app_README.md            # Webアプリ版説明書
└── 技術仕様書.txt               # このファイル

■ セキュリティ機能
----------------
- ファイル形式検証 (PDFのみ許可)
- ファイルサイズ制限 (50MB)
- 安全なファイル名処理 (secure_filename)
- 一時ファイルの自動削除
- タイムアウト設定 (30秒)

■ 対応ブラウザ
-------------
- Chrome (推奨)
- Safari
- Firefox
- Edge
- モバイルブラウザ (レスポンシブ対応)

■ 制限事項
----------
- macOSのプレビュー.appで作成されたブックマークのみ対応
- PDFファイルのみ対応
- ファイルサイズ50MB以下
- ローカル環境での実行

■ 今後の拡張可能性
----------------
- 他のOS対応 (Windows, Linux)
- 他のPDFビューア対応
- バッチ処理機能
- API化
- データベース連携
- ユーザー認証機能

作成日: 2025年8月3日
更新日: 2025年8月3日 