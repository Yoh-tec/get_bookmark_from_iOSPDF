# PDF Bookmark Extractor Web App

Flaskで作成されたWebアプリケーション版のPDFブックマーク抽出ツールです。

## 機能

- 📁 **ファイルアップロード**: ブラウザからPDFファイルをアップロード
- 🖱️ **ドラッグ&ドロップ**: ファイルをドラッグ&ドロップでアップロード
- 🔍 **ワンクリック抽出**: ボタン一つでブックマーク情報を抽出
- 📊 **結果表示**: 抽出されたブックマーク情報を美しく表示
- 📱 **レスポンシブ**: スマートフォンやタブレットでも使用可能

## 前提条件

### 1. Python 3.7以上
```bash
# macOS (Homebrew)
brew install python3

# Ubuntu/Debian
sudo apt-get install python3 python3-pip

# CentOS/RHEL
sudo yum install python3 python3-pip
```

### 2. 必要なツール
```bash
# qpdf
brew install qpdf

# jq
brew install jq
```

## インストール

1. **リポジトリをクローンまたはファイルをダウンロード**

2. **依存関係をインストール**
```bash
pip3 install -r requirements.txt
```

3. **シェルスクリプトに実行権限を付与**
```bash
chmod +x extract_bookmarks.sh
```

## 使用方法

### 1. アプリケーションを起動
```bash
python3 app.py
```

### 2. ブラウザでアクセス
```
http://localhost:5000
```

### 3. PDFファイルをアップロード
- **方法1**: 「ファイルを選択」ボタンをクリック
- **方法2**: PDFファイルをドラッグ&ドロップ

### 4. ブックマーク抽出
「🔍 ブックマークを抽出」ボタンをクリック

### 5. 結果確認
抽出されたブックマーク情報が表示されます

## 画面構成

### メイン画面
- **アップロードエリア**: ファイル選択・ドラッグ&ドロップ
- **ファイル情報**: 選択されたファイルの詳細
- **抽出ボタン**: ブックマーク抽出実行

### 結果画面
- **ファイル名**: 処理されたファイル名
- **ページ数**: ブックマークが設定されているページ数
- **ページ番号**: ブックマークが設定されているページ番号のリスト

### エラー画面
- **エラーメッセージ**: 発生したエラーの詳細
- **再試行ボタン**: 新しいファイルを選択

## ファイル構成

```
web_app/
├── app.py                 # Flaskメインアプリケーション
├── requirements.txt       # Python依存関係
├── extract_bookmarks.sh   # ブックマーク抽出スクリプト
├── templates/
│   └── index.html        # メインHTMLテンプレート
├── static/
│   └── style.css         # CSSスタイル
├── uploads/              # アップロードファイル保存先
└── web_app_README.md     # このファイル
```

## セキュリティ機能

- **ファイル形式検証**: PDFファイルのみアップロード可能
- **ファイルサイズ制限**: 最大50MB
- **安全なファイル名**: アップロードされたファイル名を安全に処理
- **一時ファイル削除**: 処理後にアップロードファイルを自動削除
- **タイムアウト設定**: 30秒で処理をタイムアウト

## トラブルシューティング

### エラー: Flaskがインストールされていません
```bash
pip3 install Flask
```

### エラー: qpdfがインストールされていません
```bash
brew install qpdf
```

### エラー: ポート5000が使用中
```bash
# 別のポートで起動
python3 app.py --port 5001
```

### エラー: ファイルアップロードに失敗
- ファイルサイズが50MB以下か確認
- PDFファイルかどうか確認
- ブラウザのJavaScriptが有効か確認

## カスタマイズ

### ポート番号の変更
`app.py`の最後の行を編集：
```python
app.run(debug=True, host='0.0.0.0', port=8080)  # ポート8080に変更
```

### ファイルサイズ制限の変更
`app.py`の設定部分を編集：
```python
MAX_FILE_SIZE = 100 * 1024 * 1024  # 100MBに変更
```

### デザインの変更
`static/style.css`を編集してカスタマイズ可能

## ライセンス

このツールは自由に使用・改変・配布できます。

## 作者

PDF Bookmark Extractor Web App 